<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>D√©tail du livre</title>
  <link rel="stylesheet" href="../style/style.css" />
</head>
<body>

  <div class="header">
    <div>
      <ol id="menu">
        <li class="depli">&#9776;
          <ul>
            <li><a href="../html/home.html">Accueil</a></li>
            <li><a href="#">Panier</a></li>
            <li><a href="#">Support</a></li>
            <li><a href="#">Aide</a></li>
          </ul>
        </li>
      </ol>
    </div>
    <div class="retour" onclick="history.back()">‚Üê</div>
  </div>

  <div class="presentation">
    <img id="cover" src="../img/OIP.jpeg" class="cover" alt="Couverture du livre" />
    <h2 class="titre-livre" id="titre">Titre du livre</h2>
    <p id="info-auteur">Auteur : <span></span><br>√âdition : <span></span></p>
  </div>

  <div class="container">
    <div class="onglets">
      <button class="active">Info</button>
      <a href="./magasin.html"><button class="inactive">Magasin</button></a>
      <a href="./avis.html"><button class="inactive">Avis</button></a>
    </div>

    <div class="actions">
      <span class="icon">‚ù§Ô∏è</span>
      <button class="add">Ajouter √† Lectures</button>
      <span class="icon">üõí</span>
    </div>

    <div class="resume">
      <p id="resume-text">
        R√©sum√© non disponible. <span id="toggle">Voir plus</span>
      </p>
    </div>

    <div class="tags" id="tags">
      <!-- Tags dynamiques -->
    </div>

      <div class="reco-section">
  <p>Que lire apr√®s ce livre :</p>
  <div class="reco-row" id="reco-row">
    <img id="reco1" src="" alt="Recommandation 1" />
    <img id="reco2" src="" alt="Recommandation 2" />
    <img id="reco3" src="" alt="Recommandation 3" />
  </div>
</div>

  <script>
    const livres = [
      {
        titre: "Omniscient Reader‚Äôs Viewpoint",
        auteur: "Sing Shong",
        edition: "Munpia",
        resumeCourt: "Kim Dokja est un employ√© banal menant une vie ordinaire. Le meilleur moment de sa journ√©e ? Lorsqu‚Äôil lit son webroman pr√©f√©r√©... <span id='toggle'>Voir plus</span>",
        resumeLong: "Kim Dokja est un employ√© banal menant une vie ordinaire. Le meilleur moment de sa journ√©e ? Lorsqu‚Äôil lit son webroman pr√©f√©r√©, dont il est le seul et unique lecteur. Mais alors qu‚Äôil en d√©couvre l‚Äôultime chapitre, l‚Äôapocalypse s‚Äôabat sur le monde... <span id='toggle'>Voir moins</span>",
        cover: "../img/OIP.jpeg",
        tags: ["Light novel", "Seinen", "Science fiction", "Fantastique", "Dystopie", "Survival horror", "Post apocalyptique", "Surnaturel", "Horreur", "Meurtre", "Jeux", "Cor√©e"]
      },
      {
        titre: "Solo Leveling",
        auteur: "Chu-Gong",
        edition: "D&C Media",
        resumeCourt: "Sung Jin-Woo est le plus faible des chasseurs... <span id='toggle'>Voir plus</span>",
        resumeLong: "Sung Jin-Woo est le plus faible des chasseurs. Mais apr√®s avoir surv√©cu √† un donjon double, il gagne un pouvoir myst√©rieux : il peut √©voluer sans limite... <span id='toggle'>Voir moins</span>",
        cover: "../img/SL_ln.jpg",
        tags: ["Action", "Fantasy", "Dungeon", "Chasseur", "Manhwa"]
      },
      {
        titre: "Le Petit Prince",
        auteur: "Antoine de Saint-Exup√©ry",
        edition: "√âditions Gallimard",
        resumeCourt: "Un aviateur perdu dans le d√©sert rencontre un petit prince venu d‚Äôune autre plan√®te... <span id='toggle'>Voir plus</span>",
        resumeLong: "Un aviateur perdu dans le d√©sert rencontre un petit prince venu d‚Äôune autre plan√®te. √Ä travers leurs √©changes, ils explorent l‚Äôinnocence, la sagesse et l‚Äôessence de l‚Äôhumanit√©... <span id='toggle'>Voir moins</span>",
        cover: "../img/LPP.jpeg",
        tags: ["Classique", "Philosophie", "Conte", "Enfance", "Po√©sie"]
      },
      {
        titre: "1984",
        auteur: "George Orwell",
        edition: "Secker & Warburg",
        resumeCourt: "Dans une soci√©t√© totalitaire o√π Big Brother surveille tout, Winston Smith tente de r√©sister... <span id='toggle'>Voir plus</span>",
        resumeLong: "Dans une soci√©t√© totalitaire o√π Big Brother surveille tout, Winston Smith tente de r√©sister au r√©gime oppressif. Un r√©cit proph√©tique sur la surveillance et la libert√©... <span id='toggle'>Voir moins</span>",
        cover: "../img/1984.jpeg",
        tags: ["Dystopie", "Politique", "Classique", "Science-fiction"]
      },
      {
        titre: "La chartreuse de Parme ",
        auteur: "Stendhal",
        edition: "Biblioth√®que pr√©cieuse",
        resumeCourt: "La Chartreuse de Parme de Stendhal raconte l'histoire de Fabrice del Dongo, un jeune noble italien qui s'engage dans l'arm√©e napol√©onienne... <span id='toggle'>Voir plus</span>",
        resumeLong: "La Chartreuse de Parme de Stendhal raconte l'histoire de Fabrice del Dongo, un jeune noble italien qui s'engage dans l'arm√©e napol√©onienne. Apr√®s avoir surv√©cu √† la bataille de Waterloo, il se retrouve emprisonn√© et impliqu√© dans des intrigues politiques et des aventures amoureuses. Le roman explore ses luttes personnelles et ses aspirations dans un contexte historique tumultueux. Parall√®lement, le personnage de Gina, la s≈ìur de la marquise, apporte une atmosph√®re de tranquillit√© au ch√¢teau apr√®s le d√©c√®s de son mari, influen√ßant ainsi la dynamique des personnages... <span id='toggle'>Voir moins</span>",
        cover: "../img/ST.jpeg",
        tags: ["Litt√©rature fran√ßaise", "Roman classique", "Roman d'apprentissage", "Aventure", "Noblesse", "Amour", "Politique", "Italie"]
      },
      {
        titre: "Lord of Mysteries",
        auteur: "Cuttlefish That Loves Diving",
        edition: "Webnovel",
        resumeCourt: "Dans un monde steampunk teint√© d'horreur cosmique, Klein Moretti, un jeune homme ordinaire, se retrouve plong√© dans une r√©alit√© occulte pleine de dieux, de rituels et de secrets. En...<span id='toggle'>Voir plus</span>",
        resumeLong:"Dans un monde steampunk teint√© d'horreur cosmique, Klein Moretti, un jeune homme ordinaire, se retrouve plong√© dans une r√©alit√© occulte pleine de dieux, de rituels et de secrets. En devenant un Beyonder, il explore des forces mystiques tiut en affrontant de puissantes organisations secr√®tes... <span id='toggle'>Voir moins</span>",
        cover:"../img/LoM_ln.jpeg",
        tags: ["Fantasy sombre", "Horreur cosmique", "Surnaturel", "Steampunk", "Monde alternatif","Psychologie", "Dieux", "Enqu√™te","Organisation secr√®te"],
      },
      {
        titre :"The Nubula's Civilization",
        auteur: "Morning Star LL",
        edition: "Webnovel",
        resumeCourt:"Un jeune homme obtient la capacit√© de construire et guider une civilisation enti√®re dans un autre monde, √† partir de rien, comme dans un jeu de strat√©gie...<span id='toggle'>Voir plus</span>",
        resumeLong: "Un jeune homme obtient la capacit√© de construire et guider une civilisation enti√®re dans un autre monde, √† partir de rien, comme dans un jeu de strat√©gie. Entre d√©veloppement technologique, conqu√™tes galactiques et luttes entre civilisations, il devient le Dieu d'un empire en expansion... <span id='toggle'>Voir moins</span>",
        cover:"../img/NC_ln.jpeg",
        tags: ["Isekai", "IA", "Strat√©gie", "Science-fiction", "Dieu cr√©ateur", "Guerre spatiale", "Philosophie"],
      },
      {
        titre: "Le Dernier Jour d‚Äôun Condamn√©",
        auteur: "Victor Hugo",
        edition: "Folio classique",
        resumeCourt: "Dans ce court roman engag√©, Victor Hugo donne la parole √† un homme condamn√© √† mort... <span id='toggle'>Voir plus</span>",
        resumeLong: "Dans ce court roman engag√©, Victor Hugo donne la parole √† un homme condamn√© √† mort. √Ä travers son journal, il partage ses peurs, ses souvenirs et ses r√©flexions sur l‚Äôinjustice de la peine capitale. Un plaidoyer poignant contre la peine de mort. <span id='toggle'>Voir moins</span>",
        cover: "../img/Le-Dernier-Jour-d-un-Condamne.jpg",
        tags: ["Classique", "Drame", "Philosophie", "Justice", "Condamnation", "Peur", "Monologue int√©rieur", "Engagement", "France", "Victor Hugo"]
      },
      {
        titre: "Influence et Manipulation",
        auteur: "Robert Cialdini",
        edition: "Pocket",
        resumeCourt: "Un livre de psychologie sociale incontournable pour comprendre les m√©canismes de l‚Äôinfluence... <span id='toggle'>Voir plus</span>",
        resumeLong: "Un livre de psychologie sociale incontournable pour comprendre les m√©canismes de l‚Äôinfluence. Robert Cialdini y expose six principes fondamentaux qui r√©gissent nos comportements lorsqu‚Äôon cherche √† nous persuader : r√©ciprocit√©, raret√©, autorit√©, engagement, sympathie et preuve sociale. <span id='toggle'>Voir moins</span>",
        cover: "../img/infl-et-manip.jpeg",
        tags: ["Essai", "Psychologie", "D√©veloppement personnel", "Manipulation", "Communication", "Sociologie", "Comportement humain", "Persuasion", "Science", "√âthique"]
      },
      {
        titre: "Jane Eyre",
        auteur: "Charlotte Bront√´",
        edition: "Le Livre de Poche",
        resumeCourt: "Orpheline maltrait√©e, Jane Eyre devient gouvernante et d√©couvre l‚Äôamour dans un manoir myst√©rieux... <span id='toggle'>Voir plus</span>",
        resumeLong: "Orpheline maltrait√©e, Jane Eyre devient gouvernante et d√©couvre l‚Äôamour dans un manoir myst√©rieux. Entre passion, secrets enfouis et qu√™te d‚Äôind√©pendance, ce roman embl√©matique du XIXe si√®cle allie f√©minisme, romantisme et gothisme avec intensit√©. <span id='toggle'>Voir moins</span>",
        cover: "../img/Jane-Eyre.jpg",
        tags: ["Roman", "Classique", "Romance", "F√©minisme", "Angleterre", "XIXe si√®cle", "Gothique", "Myst√®re", "Orpheline", "Amour", "Identit√©"]
      },
      {
        titre: "Les Mis√©rables",
        auteur: "Victor Hugo",
        edition: "Gallimard",
        resumeCourt: "L'√©pop√©e de Jean Valjean, ancien for√ßat, en qu√™te de r√©demption dans une France en mutation... <span id='toggle'>Voir plus</span>",
        resumeLong: "L'√©pop√©e de Jean Valjean, ancien for√ßat, en qu√™te de r√©demption dans une France en mutation. √Ä travers des personnages inoubliables, Victor Hugo d√©peint les injustices sociales et les espoirs d'une soci√©t√© plus √©quitable... <span id='toggle'>Voir moins</span>",
        cover: "../img/miserables.webp",
        tags: ["Classique", "Victor Hugo", "Justice sociale", "XIXe si√®cle", "France"]
      },
      {
        titre: "Tintin au Tibet",
        auteur: "Herg√©",
        edition: "Casterman",
        resumeCourt: "Tintin part √† la recherche de son ami Tchang, disparu dans les montagnes de l'Himalaya... <span id='toggle'>Voir plus</span>",
        resumeLong: "Tintin part √† la recherche de son ami Tchang, disparu dans les montagnes de l'Himalaya. Accompagn√© de son fid√®le Milou, il affronte les dangers du Tibet et d√©couvre la l√©gende du y√©ti... <span id='toggle'>Voir moins</span>",
        cover: "../img/Tintin_au_tibet.webp",
        tags: ["Bande dessin√©e", "Aventure", "Himalaya", "Amiti√©", "Myst√®re"]
      },
      {
        titre: "Ast√©rix le Gaulois",
        auteur: "Ren√© Goscinny et Albert Uderzo",
        edition: "√âditions Albert Ren√©",
        resumeCourt: "Dans un petit village gaulois, Ast√©rix et Ob√©lix r√©sistent √† l'envahisseur romain avec humour et potion magique... <span id='toggle'>Voir plus</span>",
        resumeLong: "Dans un petit village gaulois, Ast√©rix et Ob√©lix r√©sistent √† l'envahisseur romain avec humour et potion magique. Cette premi√®re aventure pose les bases d'une s√©rie embl√©matique de la bande dessin√©e franco-belge... <span id='toggle'>Voir moins</span>",
        cover: "../img/asterix_gaulois.jpeg",
        tags: ["Bande dessin√©e", "Humour", "Historique", "Gaulois", "Romans"]
     },
      {
        titre: "Le Comte de Monte-Cristo",
        auteur: "Alexandre Dumas",
        edition: "Le Livre de Poche",
        resumeCourt: "Edmond Dant√®s, trahi et emprisonn√©, s'√©vade et devient le myst√©rieux Comte de Monte-Cristo pour se venger... <span id='toggle'>Voir plus</span>",
        resumeLong: "Edmond Dant√®s, trahi et emprisonn√©, s'√©vade et devient le myst√©rieux Comte de Monte-Cristo pour se venger. Ce roman d'aventure explore la justice, la trahison et la r√©demption dans la France du XIXe si√®cle... <span id='toggle'>Voir moins</span>",
        cover: "../img/monte_cristo.jpg",
        tags: ["Classique", "Aventure", "Vengeance", "XIXe si√®cle", "France"]
      },
      {
        titre: "L'√âtranger",
        auteur: "Albert Camus",
        edition: "Gallimard",
        resumeCourt: "Meursault, un homme indiff√©rent au monde, commet un meurtre et fait face √† l'absurdit√© de la justice... <span id='toggle'>Voir plus</span>",
        resumeLong: "Meursault, un homme indiff√©rent au monde, commet un meurtre et fait face √† l'absurdit√© de la justice. Ce roman embl√©matique de l'existentialisme explore l'absurde et la condition humaine... <span id='toggle'>Voir moins</span>",
        cover: "../img/etranger.webp",
        tags: ["Classique", "Philosophie", "Existentialisme", "Absurde", "Justice"]
      },
      {
        titre: "Les Liaisons dangereuses",
        auteur: "Choderlos de Laclos",
        edition: "Le livre de poche",
        resumeCourt: "Une correspondance manipulatrice entre la marquise de Merteuil et le vicomte de Valmont dans l'aristocratie fran√ßaise... <span id='toggle'>Voir plus</span>",
        resumeLong: "Une correspondance manipulatrice entre la marquise de Merteuil et le vicomte de Valmont dans l'aristocratie fran√ßaise. Ce roman √©pistolaire d√©voile les intrigues et les jeux de pouvoir de l'Ancien R√©gime... <span id='toggle'>Voir moins</span>",
        cover: "../img/liaisons_dangereuses.jpg",
        tags: ["Classique", "Roman √©pistolaire", "Manipulation", "XVIIIe si√®cle", "France"]
      }

    ];

    const params = new URLSearchParams(window.location.search);
    const id = parseInt(params.get("id"));
    const livre = livres[(id >= 0 && id < livres.length) ? id : 0];

    document.getElementById("titre").textContent = livre.titre;
    document.getElementById("info-auteur").innerHTML = `Auteur : <span>${livre.auteur}</span><br>√âdition : <span>${livre.edition}</span>`;
    document.getElementById("resume-text").innerHTML = livre.resumeCourt;
    document.getElementById("cover").src = livre.cover;

    const tagsContainer = document.getElementById("tags");
    tagsContainer.innerHTML = ""; // vide avant d'ajouter
    livre.tags.forEach(tag => {
      const span = document.createElement("span");
      span.textContent = tag;
      tagsContainer.appendChild(span);
    });

    let expanded = false;
    document.addEventListener("click", function (e) {
      if (e.target.id === "toggle") {
        expanded = !expanded;
        document.getElementById("resume-text").innerHTML = expanded ? livre.resumeLong : livre.resumeCourt;
      }
    });



    function getRandomRecommendations(currentTitle, count = 3) {
  const filtered = livres.filter(livre => livre.titre !== currentTitle);
  const shuffled = filtered.sort(() => 0.5 - Math.random());
  return shuffled.slice(0, count);
}

function afficherRecommandations(currentTitle) {
  const recommandations = getRandomRecommendations(currentTitle);
  recommandations.forEach((livre, index) => {
    const recoImg = document.getElementById(`reco${index + 1}`);
    recoImg.src = livre.cover;
    recoImg.alt = livre.titre;
    recoImg.title = livre.titre;
  });
  function getRandomRecommendations(currentId, count = 3) {
  const autresLivres = livres.filter((_, index) => index !== currentId);
  const melange = autresLivres.sort(() => Math.random() - 0.5);
  return melange.slice(0, count);
}

function afficherRecommandations(currentId) {
  const recoRow = document.getElementById("reco-row");
  const recoLivres = getRandomRecommendations(currentId);

  recoRow.innerHTML = ""; // Vider les recommandations actuelles

  recoLivres.forEach((livre, index) => {
    const lien = document.createElement("a");
    lien.href = `info.html?id=${livres.indexOf(livre)}`;
    lien.title = livre.titre;

    const img = document.createElement("img");
    img.src = livre.cover;
    img.alt = livre.titre;
    img.style.width = "60px"; // Taille r√©duite
    img.style.margin = "5px";
    img.style.borderRadius = "5px";

    lien.appendChild(img);
    recoRow.appendChild(lien);
  });
}

// Appelle la fonction une fois le livre actuel charg√© :
afficherRecommandations(id);

}

// Exemple d‚Äôappel (remplace "Titre du livre" par le vrai titre du livre affich√©)
const titreActuel = "Omniscient Reader‚Äôs Viewpoint"; // ou r√©cup√®re dynamiquement le titre si possible
afficherRecommandations(titreActuel);

  </script>


</body>
</html>
