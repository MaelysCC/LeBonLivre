<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LeBonLivre - Magasin</title>
  <link rel="stylesheet" href="../style/style.css">
</head>
<body>

<div class="header">
  <div>
    <ol id="menu">
      <li class="depli">&#9776;
      <ul>
        <li><a href="../html/home.html">Accueil</a></li>
        <li><a href="">Panier</a></li>
        <li><a hreft="">Support</a></li>
        <li><a href="">Aide</a></li>
      </ul> </li>
    </ol>
  </div>
  <div class="retour">&#x21A9;</div>
</div>

<div class="presentation">
    <img src="../img/OIP.jpeg" class="cover">

  <h2 class="titre-livre">Omniscient Reader’s viewpoint</h2>
  <p>Auteur : Sing Shong<br>Édition : Munpia</p>

</div>
<div class="container">
  <div class="onglets">
    <a href="./info.html"><button class="inactive">Info</button></a>
    <button class="active">Magasin</button>
    <a href="./avis.html"><button class="inactive">Avis</button></a>
  </div>
  <div class="magasin-header">
    <table>
      <tr>
        <th>Zone</th><th>Prix</th><th>Livraison</th><th>Catégorie</th>
      </tr>
    </table>
    <a href="./vendre.html"><button class="sell-btn">Je souhaite vendre mon exemplaire</button></a>
    <p>32 disponibilités</p>
  </div>

  <div class="offres">
  <a href="./offre.html?id=0"><div class="offre">
    <p><strong>TipLouf</strong> — Prix: 6€ — Livraison</p>
  </div></a>
  <a href="./offre.html?id=1"><div class="offre">
    <p><strong>@seicho</strong> — Prix: 3€ — Livraison et main propre</p>
  </div></a>
  <a href="./offre.html?id=2"><div class="offre">
    <p><strong>jadou</strong> — Prix: 12€ — Main propre uniquement</p>
  </div></a>
  <a href="./offre.html?id=3"><div class="offre">
    <p><strong>Killalune</strong> — Prix: 10€ / échange — Échange ou main propre</p>
  </div></a>
  </div>
</div>

<!--<script>
document.addEventListener("DOMContentLoaded", () => {
  const container = document.getElementById("offres");
  const annonces = JSON.parse(localStorage.getItem("annonces")) || [];

  annonces.forEach(a => {
    const div = document.createElement("div");
    div.className = "offre";
    div.innerHTML = `<strong>${a.user}</strong> — Prix: ${a.prix} — ${a.livraison}<br><small>${a.etat} – ${a.details}, ${a.localisation}</small>`;
    container.appendChild(div);
  });
});
</script>-->
<script>
  //localStorage.removeItem("annonces");  //ce truc sert a reset les test
  document.addEventListener("DOMContentLoaded", () => {
  const container = document.querySelector(".offres");
  const countText = document.querySelector(".magasin-header p");
  const baseCount = 4; // les 4 offres codées en dur
  let id = baseCount;

  // Chargement des annonces dynamiques
  const annonces = JSON.parse(localStorage.getItem("annonces")) || [];

  annonces.forEach((a, i) => {
    const div = document.createElement("div");
    div.className = "offre";
    div.innerHTML = `<p><strong>${a.user}</strong> — Prix: ${a.prix} — ${a.livraison}</p><small>${a.etat} – ${a.details}, ${a.localisation}</small>`;
    
    // Créer un lien vers offre dynamique (par exemple: offre.html?user=dynamic&id=0)
    const link = document.createElement("a");
    link.href = `./offre.html?user=dynamic&id=${i}`;
    link.appendChild(div);
    container.appendChild(link);
  });

  // Mise à jour du compteur total
  const total = baseCount + annonces.length;
  countText.textContent = `${total} disponibilités`;
});
</script>


</body>
</html>
